/** ┌──────────────────────────────────────────────────────────────────────────────────────────────┐
*** │ FILENAME: forms.less                                                                         │
*** │                                                                                              │
*** │ SUMMARY: Consists of styles for elements associated with form nodes within OUE pages built   │
*** │   using the WSU Spine theme for WordPress. Styles are designed to accompany or supersede     │
*** │   styling associated with the Spine parent theme.                                            │
*** │                                                                                              │
*** │ AUTHOR: Daniel Rieck <daniel.rieck@wsu.edu> (https://github.com/invokeImmediately)           │
*** │                                                                                              │
*** │ LICENSE: ISC - Copyright (c) 2020 Daniel C. Rieck.                                           │
*** │                                                                                              │
*** │   Permission to use, copy, modify, and/or distribute this software for any purpose with or   │
*** │   without fee is hereby granted, provided that the above copyright notice and this           │
*** │   permission notice appear in all copies.                                                    │
*** │                                                                                              │
*** │   THE SOFTWARE IS PROVIDED "AS IS" AND DANIEL C. RIECK DISCLAIMS ALL WARRANTIES WITH REGARD  │
*** │   THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT │
*** │   SHALL DANIEL C. RIECK BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL        │
*** │   DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN  │
*** │   AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN           │
*** │   CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.                                   │
*** └──────────────────────────────────────────────────────────────────────────────────────────────┘
***  TABLE OF CONTENTS:
***  ────────────────────────────────────────────────────────────────────────────────────────────
***  §1: Vanilla forms.........................................................................36
***    >>> §1.1: Form-mediated "Read More" interfaces..........................................40
***  §2: Gravity forms........................................................................116
***    >>> §2.1: Modifications of default GF styling..........................................120
***    >>> §2.2: Required field highlighting..................................................384
***    >>> §2.3: Advanced form controls.......................................................496
***  §3: WSUWP password entry form............................................................595
***  ───────────────────────────────────────────────────────────────────────────────────────────────
**/

/** ================================================================================================
*** §1: Vanilla forms
**/

/**     ····························································································
***     >>> §1.1: Form-mediated "Read More" interfaces
**/

@daesa-forms__read-more: {
	input.read-more-state {
		display: none;

		&:checked ~ .read-more-target {
			margin-top: 0;
			height: auto;
			opacity: 1;
		}

		& ~ p label.read-more-trigger:before {
			content: 'Show more';
		}
	}

	label.read-more-trigger {
		.animation(orange-glow; 5s);
		background-color: rgba(@rval,@gval,@bval,0.25); .rgb-accent-yellow();
		border: 1px solid #2a3033;
		border-radius: .25rem;
		color: @hex-dark-gray;
		cursor: pointer;
		display: inline-block;
		font-size: .9rem;
		.keyframes(orange-glow; @rules-orange-glow);
		line-height: 2;
		padding: 0 .5rem;
		position: relative;
		.transition(~"all 0.3333s ease");

		&:after {
			border-radius: 0.25rem;
			bottom: 0;
			content: "";
			left: 2px;
			position: absolute;
			right: 2px;
			top: 2px;

			& {
				@color-top: returned; .getRgbaForProp(@color-top, @hex-white, 0.7);
				@color-mid-a: returned-2; .getRgbaForProp(@color-mid-a, @hex-white, 0.1);
				@color-mid-b: returned-3; .getRgbaForProp(@color-mid-b, @hex-black, 0);
				@color-btm: returned-4; .getRgbaForProp(@color-btm, @hex-black, 0.1);         
				background: linear-gradient(@@color-top, @@color-mid-a 50%, @@color-mid-b 50%, 
					@@color-btm);
			}
		}
	}

	label.read-more-trigger:hover {
		.animation(none);
		background-color: rgba(@rval,@gval,@bval,1.0); .rgb-accent-yellow();
		border: 1px solid #2a3033;
		box-shadow: 0 0 18px rgba(@rval,@gval,@bval,0.6667);
		color: @hex-darkest-gray;
	}

	div.read-more-target {
		height: 0;
		margin-top: .5rem;
		opacity: 0;
		overflow: hidden;
		.transition(~"all .333s ease");
	}

	.read-more-state:checked ~ p label.read-more-trigger:before {
		content: 'Show less';
	}
};
.declare-ruleset(@daesa-forms__read-more, @oue-rules-wrapper, @use-design__read-more);

/**   ----------------------------------------------------------------------------------------------
***   §2: Gravity forms
**/

/**     ····························································································
***     >>> §2.1: Modifications of default GF styling
**/

@daesa-forms__gravity-forms: {
	.column {
		.gform_wrapper {
			max-width: 990px;

			#extensions_message {
				padding-left: 1rem;
			}

			.field_sublabel_above {
				.ginput_complex.ginput_container label {
					margin: 0;
				}
			}

			.gfield_checkbox li {
				margin-bottom: 0;
			}

			.gfield_checkbox li label,
			.gfield_radio li label {
				font-weight: normal;
			}

			.gfield_checkbox li input,
			.gfield_checkbox li input[type=checkbox],
			.gfield_radio li input[type=radio] {
				vertical-align: top;
			}

			&.gf_browser_chrome {
				.gfield_checkbox li input,
				.gfield_checkbox li input[type=checkbox],
				.gfield_radio li input[type=radio] {
					margin-top: 8px;
				}
			}

			.gfield_description {
				max-width: 80ch;
			}

			.gform_body > ul {
				& > li.has-top-border:not(.gsection):not(.gfield_html) + li:not(.gsection)::before, 
				& > li.has-top-spacer:not(.gsection):not(.gfield_html) + li:not(.gsection)::before {
					content: "";
					display: block;
					height: 0;
					margin: @v-dflt-spcng auto 0;
					width: 95%;
				}

				& > li.has-top-border:not(.gsection):not(.gfield_html) + li:not(.gsection)::before {
					border-bottom: 1px dashed rgba(160,160,160,0.25);
					border-top: 1px dashed rgba(@rval,@gval,@bval,0.3333); .rgb-dark-gray(); 
				}

				& > li.gf-bckgrnd-field {
					display: none !important;
				}
			}

			.gform_heading {
				li {
					list-style: disc !important;
				}
			}

			.ginput_complex {
				span.ginput_full:not(:first-of-type) label, span.ginput_left:not(:first-of-type) 
						label, span.ginput_right:not(:nth-of-type(2)) label {
					margin-top: 0.4em;
				}
			}

			.gsection {
				margin-bottom: 0;
				margin-top: @v-dflt-spcng;
			}

			.percentbar_blue {
				background-color: extract(@colors--crimsons__hex, @colors__darkish);
			}

			.top_label li ul.gfield_radio {
				@media only screen and (min-width: 641px) {
					width: 100%;
				}

			}

			h2.fancy {
				margin-right: 0;
				margin-left: 0;
			}

			h2.gsection_title {
				.font-size(@h4-font-size);
			}

			label.gfield_label {
				margin-top: 0;
				margin-bottom: 0;
				font-size: 1.125em;
			}

			ul:last-child {
				padding-bottom: 0;
			}

			&.gf_browser_chrome .gform_body {
				@media only screen {
					@media (min-width: 641px) {
						width: ~"calc(100% + 15px)";
					}

					@media (max-width: 640px) {
						width: 100%;
					}
				}
			}
		}

		li.gfield {
			:focus {
				outline: 1px solid blue;
			}

			.chosen-single,
			.chosen-drop {
				border-color: #717171 !important;
			}

			input,
			select {
				border-color: #717171 !important;
				border-style: solid !important;
				border-width: 1px !important;
			}

			&.uses-rich-editor {
				.tmce-active {
					.mce-menubar {
						display: none;
					}

					.mce-toolbar.mce-first {
						.mce-btn {
							&[aria-label="Insert/edit image (Shift+Alt+M)"],
							&[aria-label="Align left (Shift+Alt+L)"],
							&[aria-label="Align center (Shift+Alt+C)"],
							&[aria-label="Align right (Shift+Alt+R)"],
							&[aria-label="Align left (Shift+Alt+L)"],
							&[aria-label="Table"],
							&[aria-label="Show blocks"],
							&[aria-label="Source code"],
							&[aria-label="Toolbar Toggle (Shift+Alt+Z)"] {
								display: none;
							}
						}
					}

					.mce-statusbar {
						display: none;
					}
				}

				.wp-editor-container {
					border-color: #717171 !important;
				}

				iframe {
					width: 100% !important;
				}

				span.gp-word-count-label {
					margin-top: 0 !important;
				}
			}

			&.gf_left_half.expands-to-two-thirds {
				@media only screen and (min-width: 641px) {
					width: 67% !important;
				}

				& + li.gfield.gf_right_half {
					@media only screen and (min-width: 641px) {
						width: 33% !important;
					}
				}
			}

			&.has-label-spacer {
				& > div.ginput_container {
					@media only screen {
						@media (min-width: 641px) {
							margin-top: 21px;
						}

						@media (min-width: (@tablet-screen-width + 1)) {
							margin-top: 23px;
						}

						@media (min-width: (@spine-threshold + 1)) {
							margin-top: 21px;
						}

						@media (min-width: @desktop-width) {
							margin-top: 23px;
						}
					}
				}
			}

			& > div.ginput_complex > span > label {
				color: @hex-dark-grayish-pink;
			}

			& > .ginput_container_select {
				& > .chosen-container {
					width: 100% !important;
				}

				& > .chosen-container-single {
					& > .chosen-single {
						background: linear-gradient(to bottom, rgba(0,0,0,0) 20%, 
							rgba(0,0,0,0.038) 50%, rgba(0,0,0,0.07) 52%, 
							rgba(0,0,0,0.045) 100%), linear-gradient(to bottom, #fff, #fff);
						height: 1.98em;
						line-height: 1.98em;

						&:hover {
							text-shadow: none;
						}

						& > div > b {
							background-position: ~"0 calc(-10px + 1.98em / 2)";

							@media only screen and (max-width: 641px) {
								top: ~"calc(0.99em - 3px)";
								background-position: 0 -7px;
							}
						}
					}

					&.chosen-with-drop > .chosen-single {
						background: linear-gradient(to bottom, rgba(0,0,0,0.07) 20%, 
							rgba(0,0,0,0) 80%), linear-gradient(to bottom, #fff, #fff);
					}
				}
			}

			div.ginput_container_textarea > textarea {
				font-size: 16px;
			}
		}
	}
};
.declare-ruleset(@daesa-forms__gravity-forms, @oue-rules-wrapper, @use-design__gravity-forms);

/**     ····························································································
***     >>> §2.2: Required field highlighting
**/

@daesa-forms__gf-highlighting: {
	.column {
		.gform_fields {
			&.top_label {
				& > li.gfield {
					&.gfield_error {
						&.gf_left_half,
						&.gf_right_half {
							width: ~"calc(50% - 16px)";
						}
					}

					&.gf_left_half,
					&.gf_right_half {
						ul.gfield_radio,
						ul.gfield_checkbox {
							width: 100%;
						}
					}

					& > div.gfield_description {
						padding: 0;
						margin: 0;
						color: @hex-dark-grayish-pink;

						ul {
							li {
								list-style: disc inside none !important;
							}
						}

						p + ul {
							margin-top: 0;
						}
					}

					& > div.ginput_complex {
						margin-top: 0;
					}
				}

				& > li.gfield + li.gfield:not(.gsection),
				li.gfield:first-child {
					.margin(@mSize-500mx, "top");
				}

			}

			& > .gfield.gfield_contains_required {
				& > .ginput_container_select {
					& > .gfield_select:not(.gf-value-entered) + .chosen-container-single:not(.chosen-with-drop) > .chosen-single {
						background: linear-gradient(to bottom,rgba(0,0,0,0) 20%,rgba(0,0,0,.038) 50%,rgba(0,0,0,.07) 52%,rgba(0,0,0,.045) 100%), linear-gradient(to bottom, rgba(255,0,0,0.1), rgba(255,0,0,0.1)), linear-gradient(to bottom,#fff,#fff);
					}

					& > .gfield_select + .chosen-container-single.chosen-with-drop > .chosen-single {
						background: linear-gradient(to bottom,rgba(0,0,0,0) 20%,rgba(0,0,0,.038) 50%,rgba(0,0,0,.07) 52%,rgba(0,0,0,.045) 100%), linear-gradient(to bottom, @hex-bright-blue, @hex-bright-blue);
					}
				}

				input,
				select,
				textarea {
					.transition(~"background 0.3s ease");

					&:focus {
						background-color: @hex-bright-blue !important;
					}
				}

				input:not(.gf-value-entered):not(:focus),
				select:not(.gf-value-entered):not(:focus),
				textarea:not(.gf-value-entered):not(:focus) {
					background-color: rgba(255,0,0,0.1);
				}

				.gfield_checkbox,
				.gfield_radio {
					.transition(~"background 0.3s ease");

					&:not(.gf-value-entered) {
						background-color: rgba(255,0,0,0.1);
					}

				}

				// Exceptions
				.address_line_2 input {
					background-color: @hex-white !important;

					&:focus {
						background-color: @hex-bright-blue !important;
					}
				}
			}
		}
	}

	.gform_heading h3.gform_title:extend(.column h3 all) {
	}

	.gform_heading h3.gform_title:extend(.column h3.fancy all) {
	}

	.gform_heading h3.gform_title:extend(.column h3.fancy.with-top-border all) {
	}
};
.declare-ruleset(@daesa-forms__gf-highlighting, @oue-rules-wrapper, @use-design__gf-highlighting);

/**     ····························································································
***     >>> §2.3: Advanced form controls
**/

@daesa-forms__gf-advanced: {
	.oue-gf-rqrd-input,
	.oue-gf-rqrd-select,
	.oue-gf-hghlghts-rqrd-input,
	.oue-gf-hghlghts-rqrd-select {
		input,
		select {
			.transition(~"background 0.3s ease");

			&:focus {
				background-color: @hex-bright-blue !important;
			}
		}

		&.gfield_contains_required {
			input:not(.gf-value-entered):not(:focus),
			select:not(.gf-value-entered):not(:focus) {
				background-color: rgba(255,0,0,0.1);
			}
		}
	}

	.oue-gf-rqrd-checkbox,
	.oue-gf-hghlghts-rqrd-checkbox {
		&.gfield_contains_required {
			ul.gfield_checkbox, ul.gfield_radio {
				.transition(~"background 0.3s ease");
				&:not(.gf-value-entered) {
					background-color: rgba(255,0,0,0.1);
				}
			}
		}
	}

	.oue-gf-rqrd-txtarea,
	.oue-gf-hghlghts-rqrd-txtarea {
		textarea {
			.transition(~"background 0.3s ease");

			&:focus {
				background-color: @hex-bright-blue;
			}
		}

		&.gfield_contains_required {
			textarea {
				&:not(.gf-value-entered):not(:focus) {
					background-color: rgba(255,0,0,0.1);
				}
			}
		}
	}
	.oue-gf-actvtr-checkbox {
		.transition(~"background 0.3s ease");

		&.gf-activated {
			display: none !important;
		}
	}

	.oue-gf-actvtr-chain {
		.transition(all 0.3s ease);

		&.gf-hidden {
			display: none !important;
		}
	}

	.oue-gf-upload-chain {
		input {
			.transition(~"background 0.3s ease");

			&:focus {
				background-color: @hex-bright-blue;
			}
		}

		&.gfield_contains_required {
			input:not(.gf-value-entered):not(:focus) {
				background-color: rgba(255,0,0,0.1);
			}
		}

		&.gf-hidden {
			display: none !important;
		}
	}

	.oue-gf-revealed {
		.animation(gf-fades-in; 0.5s; linear; 0s; 1);
		.keyframes(gf-fades-in; @frames-simple-fade-in);
	}
};
.declare-ruleset(@daesa-forms__gf-advanced, @oue-rules-wrapper, @use-design__gf-advanced);

/**   ----------------------------------------------------------------------------------------------
***   §3: WSUWP password entry form
**/
@daesa-forms__pwd-required: {
	.post-password-required {
		padding-left: 2rem;
		padding-top: 2rem;
	}
};
.declare-ruleset(@daesa-forms__pwd-required, @oue-rules-wrapper);
