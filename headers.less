/*  ┌────────────────────────────────────────────────────────────────────────────────────────────┐
**  │ FILENAME: headers.less                                                                     │
**  │                                                                                            │
**  │ AUTHOR: Daniel Rieck <daniel.rieck@wsu.edu> (https://github.com/invokeImmediately)         │
**  │                                                                                            │
**  │ DESCRIPTION: Embodies styles for heading and header elements of WSU Office of              │
**  │   Undergraduate Education web pages built using the builder template of the Spine parent   │
**  │   theme of WSUWP. Styles are designed to accompany or supersede styling associated with    │
**  │   the theme.                                                                               │
**  └────────────────────────────────────────────────────────────────────────────────────────────┘
*/

/*    ─────────────────────────────────────────────────────────────────────────────────────────── 
**    TABLE OF CONTENTS:
**    ───────────────────────────────────────────────────────────────────────────────────────────
**    OUE-HEADINGS §1: [h1] elements...........................................................42
**    OUE-HEADINGS §2: [h2] elements...........................................................63
**    OUE-HEADINGS §3: [h3] elements..........................................................144
**    OUE-HEADINGS §4: [h4] elements..........................................................211
**    OUE-HEADINGS §5: [hN] elements..........................................................242
**    OUE-HEADINGS §6: [header] elements......................................................275
**    OUE-HEADINGS §7: Accessibility friendly classes.........................................339
**      >>> §7.1: Spacing.....................................................................343
**      >>> §7.2: Font sizing.................................................................358
**      >>> §7.3: Line heights................................................................387
**      >>> §7.4: Coloring....................................................................404
**        ├> §7.4a: Defaults..................................................................407
**        └> §7.4b: Utility classes...........................................................497
**      >>> §7.5: Text transformation.........................................................616
**      >>> §7.6: Child elements..............................................................626
**    OUE-HEADINGS §8: Article Header Blocks, Elements, & Modifiers...........................654
**    OUE-HEADINGS §9: (Legacy) Sectional article headers.....................................684
*/

/*  ================================================================================================
**  SEMANTIC CSS FOR STYLING OUE HEADING & HEADER ELEMENTS
*/

@{oue-rules-wrapper} {

/*    ----------------------------------------------------------------------------------------------
**    OUE-HEADINGS §1: [h1] elements
*/

	h1 {
		.column & {
			&:extend(.has-dflt-font);

			font-weight: 700;

			&.centered {
				text-align: center;
			}
		}

		.column &:first-child,
		.column header:first-child + & {
			margin-top: 0;
		}
	}

/*    ----------------------------------------------------------------------------------------------
**    OUE-HEADINGS §2: [h2] elements
*/

	h2 {
		.column & {
			&:extend(.has-dflt-font);

			font-weight: 700;

			&.article-title {
				.has-responsive-font((@v-h2-sz * 0.4), @v-hX-lnhght);
			}

			&.centered {
				text-align: center;
			}

			&.narrower-top-margin {
				margin-top: 1.25rem;
			}

			&.no-top-margin {
				margin-top: 0;
			}
		}

		.column.show-header.has-fancy-header > header:first-child > & {
			&{ background-color: @rgba; .getRgbaStr(@hex-dark-gray, 0.2); }
			&{ background: linear-gradient(to right, transparent, rgba(@rval, @gval, @bval, 
					0.075) 5%, rgba(@rval, @gval, @bval, 0.075) 50%, rgba(@rval, @gval, @bval, 
					0.225) );
				.rgb-dark-gray(); }
			&{ border-bottom: 2px solid @rgba; .getRgbaStr(@hex-dark-gray, 0.075); }
			margin-bottom: (@v-dflt-spcng / 2);
			margin-left: (-1 * @v-dflt-spcng / 4);
			margin-right: (-1 * @v-dflt-spcng / 4);
			padding: (@v-dflt-spcng / 6) (@v-dflt-spcng / 4) (@v-dflt-spcng * 11 / 40);
			position: relative;
		}

		.column.show-header.has-fancy-header > header:first-child > & {
			padding-top: 0.5rem;

			&:not(:first-child) {
				margin-top: @v-dflt-spcng;
			}

			&::before {
				border-bottom: 1px solid rgba(@rval,@gval,@bval,0.3333);
				border-top-width: 2px;
				border-top: 1px solid rgba(@rval,@gval,@bval,0.6667);
				content: "";
				height: 0;
				left: 0;
				position: absolute;
				.rgb-darker-gray();
				top: 0;
				width: 100%;
			}
		}

		.column &:first-child,
		.column header:first-child + & {
			margin-top: 0;
		}

		.column h1 + & {
			font-style: italic;
		}

		.column hr:not(.subSection) + h2 {
			margin-top: 0;
		}
	}

	// TODO: move to hyperlink.less
	h2.article-title a {
		border-bottom: none;
	}

/*    ----------------------------------------------------------------------------------------------
**    OUE-HEADINGS §3: [h3] elements
*/

	h3 {
		.column & {
			&:extend(.has-dflt-font);

			&.centered {
				text-align: center;
			}

			&.gray {
				color: @hex-darker-gray;
			}

			&.no-top-margin {
				margin-top: 0;
			}
		}

		.column &.lowercase,
		.column.show-header.has-lowercase-header > header:first-child > & {
			text-transform: none;
		}

		.column.show-header.has-fancy-header > header:first-child > & {
			&{ background-color: @rgba; .getRgbaStr(@hex-light-crimson, 0.075); }
			&{ background: linear-gradient(to right, transparent, rgba(@rval, @gval, @bval, 
					0.075) 5%, rgba(@rval, @gval, @bval, 0.075) 50%, rgba(@rval, @gval, @bval, 
					0.225));
				.rgb-light-crimson(); }
			&{ border-bottom: 2px solid @rgba; .getRgbaStr(@hex-light-crimson, 0.075); }
			margin-bottom: (@v-dflt-spcng / 2);
			margin-left: 0;
			margin-right: 0;
			padding: (@v-dflt-spcng / 6) (@v-dflt-spcng / 4) (@v-dflt-spcng * 9 / 40) 0;
			position: relative;
		}

		.column.show-header.has-fancy-header > header:first-child > & {
			padding-top: 0.4375rem;

			&:not(:first-child) {
				margin-top: @v-dflt-spcng;
			}

			&::before {
				border-bottom: 1px solid rgba(@rval,@gval,@bval,0.375);
				border-top: 1px solid rgba(@rval,@gval,@bval,0.67);
				content: "";
				height: 0;
				left: 0;
				position: absolute;
				.rgb-crimson();
				top: 0;
				width: 100%;
			}
		}
		.column &:first-child,
		.column header:first-child + &,
		.column hr:not(.subSection) + &
		{
			margin-top: 0;
		}
	}

/*    ----------------------------------------------------------------------------------------------
**    OUE-HEADINGS §4: [h4] elements
*/

	h4 {
		.column & {
			&:extend(.has-dflt-font);

			font-weight: 600;

			&.centered {
				text-align: center;
			}

			&.fancy {
				&:extend(.column h3.fancy all);
			}

			&.gray {
				color: @hex-darker-gray;
			}
		}

		.column &:first-child,
		.column header:first-child + &,
		.column hr:not(.subSection) + &
		{
			margin-top: 0;
		}
	}

/*    ----------------------------------------------------------------------------------------------
**    OUE-HEADINGS §5: [hN] elements
*/

	.column {
		h1.crimson, h2.crimson {
			color: @hex-crimson;
		}
	}

	section {
		&.side-right, &.row.side-right {
			.column.one h2.fancy,
			.column.one h3.fancy {
				@media all and (min-width: (@column-floating-threshold + 1)) {
					margin-right: 0;
				}
			}
		}
	}

	header.article-header {
		body.blog .column & + * {
			border-top: 1px solid rgba(127,127,127,0.2);
			padding-top: 15px;
		}

		.column & h1.article-title,
		.column & h2.article-title {
			.has-responsive-font((@v-p-sz * 1.5), @v-hX-lnhght);
		}
	}

/*    ----------------------------------------------------------------------------------------------
**    OUE-HEADINGS §6: [header] elements
*/

	header.main-header {
		.sup-header-default {
			.has-responsive-font(0.9rem, false, @v-fnt-sclng-fctrs-alt-2);
			margin-bottom: .5rem;
		}

		.sub-header-default,
		.sub-header {
			.has-responsive-font((2.5rem * 16 / 17), 0.9em, @v-fnt-sclng-fctrs-alt-2);
		}

		&.centered {
			@media all {
				@media (min-width: @large-format-threshold) {
					text-align: center;
				}

				@media (min-width: (@spine-threshold + 1)) and 
						(max-width: (@large-format-threshold - 1)) {
					text-align: left;
				}

				@media (min-width: (@tablet-screen-width + 1)) and (max-width: @spine-threshold) {
					text-align: center;
				}

				@media (max-width: @tablet-screen-width) {
					text-align: left;
				}
			}
		}
		.header-group { text-align: inherit; }
		.header-group.centered {
			@media all {
				@media (min-width: @large-format-threshold) {
					left: 50%;
					width: 100%;
					.transform(~"translateX(-50%)");
				}

				@media (min-width: (@tablet-screen-width + 1)) and (max-width: @spine-threshold) {
					left: 50%;
					width: 100%;
					.transform(~"translateX(-50%)");
				}
			}
		}
	}

	.column {
		&:not(.show-header) > header:first-child {
			display: none;
		}

		header:first-child + h1, header:first-child + h2.fancy.with-top-border,
		 header:first-child + h3.fancy.with-top-border {
			margin-top: 0;
		}
	}

/*    ----------------------------------------------------------------------------------------------
**    OUE-HEADINGS §7: Accessibility friendly classes
*/

/*      ····························································································
**      >>> §7.1: Spacing
*/

	h1,
	h2,
	h3,
	h4,
	h5,
	h6 {
		padding: 0;
		margin: 0;
		.spacing(@spacing-1000mx);
	}

/*      ····························································································
**      >>> §7.2: Font sizing
*/

	// @hN-font-size variables defined in utility-mixins.less
	h1 {
		.font-size(@h1-font-size);
	}

	h2 {
		.font-size(@h2-font-size);
	}

	h3 {
		.font-size(@h3-font-size);
	}

	h4 {
		.font-size(@h4-font-size);
	}

	h5 {
		.font-size(@h5-font-size);
	}

	h6 {
		.font-size(@h6-font-size);
	}

/*      ····························································································
**      >>> §7.3: Line heights
*/

	h1,
	h2,
	h3,
	h4,
	h5,
	h6 {
		.line-height(@lHeight-733mx);

		&.linked-text {
			.line-height(@lHeight-917mx);
		}
	}

/*      ····························································································
**      >>> §7.4: Coloring
*/

//        ├> §7.4a: Defaults
	h1,
	h2,
	h3,
	h4,
	h5,
	h6 {
		color: @hex-crimson;
	}

	h1 {
		&.solid {
			&{ background-color: @rgba;
				.getRgbaStr(@hex-black, 0.9); }
			&{ background: linear-gradient(to right, rgba(@rval, @gval, @bval, 0.8) 50%, 
					rgba(@rval, @gval, @bval, 1));
				.rgb-black(); }
			&{ border-bottom: 2px solid @rgba;
				.getRgbaStr(@hex-black, 0.333); }
			color: @hex-white;

			&::before {
				border-top: 2px solid rgba(@rval, @gval, @bval,1);
				border-bottom: 1px solid rgba(@rval, @gval, @bval, 0.5);
				.rgb-black();
			}
		}
	}

	h2 {
		&.solid {
			&{ background-color: @rgba;
				.getRgbaStr(@hex-crimson, 0.9); }
			background: linear-gradient(to right, @hex-crimson 50%, @hex-dark-crimson);
			&{ border-bottom: 2px solid @rgba;
				.getRgbaStr(@hex-dark-crimson, 0.5); }
			color: @hex-white;

			&::before {
				border-bottom: 1px solid rgba(@rval, @gval, @bval,0.5);
				border-top: 2px solid rgba(@rval, @gval, @bval, 1);
				.rgb-dark-crimson();
			}
		}
	}

	h3 {
		&.solid {
			&{ background-color: @rgba;
				.getRgbaStr(@hex-light-crimson, 0.075); }
			&{ background: linear-gradient(to right,
					transparent,
					rgba(@rval, @gval, @bval, 0.075) 5%,
					rgba(@rval, @gval, @bval, 0.075) 50%,
					rgba(@rval, @gval, @bval, 0.225));
				.rgb-light-crimson(); }
			&{ border-bottom: 2px solid @rgba;
				.getRgbaStr(@hex-light-crimson, 0.075); }
			color: @hex-crimson;

			&::before {
				.rgb-crimson();
				border-top: 2px solid rgba(@rval, @gval, @bval, 0.6667);
				border-bottom: 1px solid rgba(@rval, @gval, @bval, 0.3333);
			}
		}
	}

	h4 {
		&.solid {
			&{ background-color: @rgba;
				.getRgbaStr(@hex-dark-gray, 0.2); }
			&{ background: linear-gradient(to right, transparent, rgba(@rval, @gval, @bval, 
					0.075) 5%, rgba(@rval, @gval, @bval, 0.075) 50%, rgba(@rval, @gval, @bval, 
					0.225));
				.rgb-dark-gray(); }
			& { border-bottom: 2px solid @rgba;
				.getRgbaStr(@hex-dark-gray, 0.075); }
			color: @hex-darker-gray;

			&::before {
				.rgb-darker-gray();
				border-top: 2px solid rgba(@rval, @gval, @bval, 0.6667);
				border-bottom: 1px solid rgba(@rval, @gval, @bval, 0.3333);
			}
		}
	}

// TODO: Apply default coloring styles to h5 and h6

//        └> §7.4b: Utility classes
	h1,
	h2,
	h3,
	h4,
	h5,
	h6 {
		&.solid {
			padding: .1em .25em .11em;
			position: relative;

			&::before {
				content: "";
				left: 0;
				height: 0;
				position: absolute;
				top: 0;
				width: 100%;
			}
		}

		&.white-text {
			color: @hex-white;
			&.solid,
			&.solid.black-background {
				&{ background-color: @rgba;
					.getRgbaStr(@hex-black, 0.9); }
				&{ background: linear-gradient(to right, rgba(@rval, @gval, @bval, 0.8) 50%, 
						rgba(@rval, @gval, @bval, 1));
					.rgb-black(); }
				&{ border-bottom: 2px solid @rgba;
					.getRgbaStr(@hex-black, 0.333); }

				&::before {
					border-top: 2px solid rgba(@rval, @gval, @bval,1);
					border-bottom: 1px solid rgba(@rval, @gval, @bval, 0.5);
					.rgb-black();
				}
			}

			&.solid.dark-crimson-background {
				&{ background-color: @rgba;
					.getRgbaStr(@hex-crimson-scale-darker, 0.9); }
				background: linear-gradient(to right, 
					@hex-crimson-scale-darker 50%, 
					@hex-darker-crimson);
				&{ border-bottom: 2px solid @rgba;
					.getRgbaStr(@hex-darker-crimson, 0.5); }

				&::before {
					border-bottom: 1px solid rgba(@rval, @gval, @bval,0.5);
					border-top: 2px solid rgba(@rval, @gval, @bval, 1);
					.rgb-darker-crimson();
				}
			}

			&.solid.crimson-background {
				&{ background-color: @rgba;
					.getRgbaStr(@hex-crimson, 0.9); }
				background: linear-gradient(to right, @hex-crimson 50%, @hex-dark-crimson);
				&{ border-bottom: 2px solid @rgba;
					.getRgbaStr(@hex-dark-crimson, 0.5); }

				&::before {
					border-bottom: 1px solid rgba(@rval, @gval, @bval,0.5);
					border-top: 2px solid rgba(@rval, @gval, @bval, 1);
					.rgb-dark-crimson();
				}
			}
		}

		&.gray-text {
			color: @hex-darker-gray;

			&.solid {
				&{ background-color: @rgba;
					.getRgbaStr(@hex-dark-gray, 0.2); }
				&{ background: linear-gradient(to right, transparent, rgba(@rval, @gval, @bval, 
						0.075) 5%, rgba(@rval, @gval, @bval, 0.075) 50%, rgba(@rval, @gval, @bval, 
						0.225));
					.rgb-dark-gray(); }
				&{ border-bottom: 2px solid @rgba;
					.getRgbaStr(@hex-dark-gray, 0.075); }

				&::before {
					.rgb-darker-gray();
					border-top: 2px solid rgba(@rval, @gval, @bval, 0.6667);
					border-bottom: 1px solid rgba(@rval, @gval, @bval, 0.3333);
				}
			}
		}

		&.crimson-text {
			color: @hex-crimson;

			&.solid {
				&{ background-color: @rgba;
					.getRgbaStr(@hex-light-crimson, 0.075); }
				&{ background: linear-gradient(to right,
						transparent,
						rgba(@rval, @gval, @bval, 0.075) 5%,
						rgba(@rval, @gval, @bval, 0.075) 50%,
						rgba(@rval, @gval, @bval, 0.225));
					.rgb-light-crimson(); }
				&{ border-bottom: 2px solid @rgba;
					.getRgbaStr(@hex-light-crimson, 0.075); }

				&::before {
					.rgb-crimson();
					border-top: 2px solid rgba(@rval, @gval, @bval, 0.6667);
					border-bottom: 1px solid rgba(@rval, @gval, @bval, 0.3333);
				}
			}
		}
	}

// TODO: Create additional coloring classes

/*      ····························································································
**      >>> §7.5: Text transformation
*/

	h1,
	h2,
	h3 {
		text-transform: uppercase;
	}

/*      ····························································································
**      >>> §7.6: Child elements
*/

	// hN children: Hyperlinks
	h1,
	h2,
	h3,
	h4,
	h5,
	h6 {
		.column & > a {
			@lHeight-temp: extract(@lHeight-array, @lHeight-933mx);

			border-bottom: 1px solid transparent;
			box-shadow: none;
			.line-height(@lHeight-933mx);
			line-height: ~"calc(@{lHeight-temp} + 1px)";
			text-decoration: underline;

			&:hover {
				border-bottom: 1px solid @hex-crimson;
				text-decoration: none;
			}
		}
	}
}

/*    ----------------------------------------------------------------------------------------------
**    OUE-HEADINGS §8: Article Header Blocks, Elements, & Modifiers
*/

// TODO: Finish writing.
// .page.use-bem-styles { ... }
// .article-header--2-columns
// .article-header--2-columns .article-header__column-1
// .article-header--2-columns .article-header__column-2
// .article-header__bread-crumb
// .article-header__background
// .article-header__title-text
// .article-header__title-text
// .article-header--1/2/3/4x-sized
// .article-header__subtitle-text

/*!Example from SASS:
** .person { }
**  .person__face {
**    .person--handsome & { }
**  }
**.person--handsome { }
*/

.hN--subtitle {
	display: block;
	.font-size(@fSize-400mx);
	.line-height(@lHeight-917mx);
}

/*    ----------------------------------------------------------------------------------------------
**    OUE-HEADINGS §9: (Legacy) Sectional article headers (inclusional via Less mixin)
*/

.use-sectional-article-headers() {
	.page.has-short-main-header {
		.main-header {
			height: 85px;

			& > .header-group {
				padding-bottom: 1em !important;
			}
		}
	}

	.use-short-main-header-on-pages(@header-height: 85px, @header-padding: 1em) {
		body.page:not(.home) main.spine-blank-template > header.main-header {
			@header-height: 85px;

			& > div.header-group {
				padding-bottom: @header-padding !important;
			}
		}
	}

	.row.halves.article-header,
	.row.single.article-header {
		position: relative;

		&.gutter .column:not(.gutterless) {
			padding-left: 0;
			padding-right: 0;
		}

		&.pad-top .column {
			padding-top: 0;
		}
	}

	.row.halves.article-header {
		height: 230px;

		@media all {
			@media (max-width: @large-mobile-screen-width) {
				height: 340px;
			}
		}

		@media print {
			height: auto;
		}

		.column {
			&.one {
				background: @hex-dark-gray;
				background: linear-gradient(to right, rgba(0,0,0,0.5), rgba(0,0,0,0.4) 50%, 
					rgba(0,0,0,0.1) ),
					linear-gradient(to right, #5e6a71, #5e6a71);
				height: 100%;
				left: 0;
				padding-left: 0;
				padding-right: 0;
				position: absolute;
				right: 40%;
				width: auto;

				@media all {
					@media (max-width: @large-mobile-screen-width) {
						right: 0;
						height: 50%;
						top: 50%;
						background: linear-gradient(to top, rgba(0,0,0,0.7), rgba(0,0,0,0.4) 70%, 
							rgba(0,0,0,0.1)), linear-gradient(to right, #5e6a71,#5e6a71);
					}
				}

				@media print {
					position: static;
					height: auto;
					padding: @v-dflt-spcng;
				}

				& > :first-child,
				header:first-child + * {
					left: @v-dflt-spcng;
					position: absolute;
					right: @v-dflt-spcng;
					top: 50%;
					.transform(~"translateY(-50%)");

					@media all {
						@media (max-width: @column-floating-threshold) {
							right: (@v-dflt-spcng / 2);
						}

						@media (max-width: @large-mobile-screen-width) {
							left: (@v-dflt-spcng / 2);
						}

						@media (max-width: @mobile-screen-width) {
							left: (@v-dflt-spcng / 4);
						}

						@media print {
							position: static;
							.transform(~"none");
						}
					}

					& > :last-child {
						margin-bottom: 0 !important;
					}
				}

				h1 {
					color: @hex-white;
					line-height: .95em;
					margin: 0;
					text-shadow: 0 0 4px @hex-black, 0 0 4px @hex-black, 0 0 4px @hex-black,
						0 0 4px @hex-black, 0 0 4px @hex-black;

					@media all and (max-width: @column-floating-threshold) {
						font-size: 6.5vw;
					}

					& + .subtitle {
						color: @hex-white;
						font-size: 1.25em;
						font-weight: bold;
						line-height: 1.1em;
						text-shadow: 0 0 2px @hex-black, 0 0 2px @hex-black, 0 0 2px @hex-black;
						text-transform: uppercase;

						@media all and (max-width: @column-floating-threshold) {
							font-size: 4vw;
						}
					}
				}

				.parent-page {
					color: @hex-bright-gray;
					margin-bottom: 0.125em;

					@media all and (max-width: @column-floating-threshold) {
						font-size: 3.25vw;
					}
				}

				& > :not(:first-child):not(header:first-child + *) {
					display: none;
				}

				& > :not(h1):not(div) {
					display: none;
				}
			}

			&.two {
				background-color: @hex-gray;
				background-position: center center;
				background-size: cover;
				height: 100%;
				left: 60%;
				margin-top: 0 !important;
				position: absolute;
				right: 0;
				width: auto;

				@media all {
					@media (max-width: @large-mobile-screen-width) {
						height: 50%;
						left: 0;
						top: 0;
					}
				}

				@media print {
					display: none;
				}
			}

			&.one, &.two {
				@media all and (max-width: @column-floating-threshold) {
					clear: none;
					float: left;
				}
			}
		}
	}

	.row.single.article-header {
		height: 340px;

		.column {
			background-color: @hex-gray;
			background-position: center center;
			background-size: cover;
			height: 100%;
			left: 0;
			position: absolute;
			top: 0;
			width: 100%;

			&.show-header > header {
				bottom: 0;
				box-sizing: border-box;
				left: 0;
				padding: 2rem 2rem 0;
				position: absolute;
				width: 100%;

				@media all {
					@media (max-width:@large-mobile-screen-width) {
						padding-left: .5rem;
						padding-right: .5rem;
					}
				} 
				& > * {
					@v-fnt-sclng-hdr: 1.0, 1.0, 1.0, 1.0, 0.714286, 0.510204489796;

					&{ background-color: @rgba;
						.getRgbaStr(@hex-black, 0.75); }
					color: @hex-white;
					.has-responsive-font(3.3rem, 0.9em, @v-fnt-sclng-hdr);
					margin: 0;
					padding: 0.25em;
					&{ text-shadow: 1px 1px 8px @rgba;
						.getRgbaStr(@hex-black, 0.75); }

					.subtitle {
						&{ background-color: @rgba;
							.getRgbaStr(@hex-black, 0.75); }
						display: block;
						font-size: 0.5em;
						line-height: 1.1em;
						margin-top: 0.25em;
						padding: 0.25em;
						text-transform: none;
					}
				}
			}
		}
	}
}
