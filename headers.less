/*!┌───────────────────────────────────────────────────────────────────────────────────────────────┐
** │ ++++ HEADINGS & HEADERS +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ │
** │   Style rules applied to headings & headers to override default styling in, and extend styl-  │
** │   ing options beyond, the WSU Spine Theme for WordPress.                                      │
** └───────────────────────────────────────────────────────────────────────────────────────────────┘
*/
//   ┌─────────────────────────────────────────────────────────────────────────────────────────────┐
//   │ AUTHOR: Daniel Rieck [daniel.rieck@wsu.edu] (https://github.com/invokeImmediately)          │
//   │                                                                                             │
//   │ DEPENDENCIES: This file assumes the following LESS files have been imported upstream:       │
//   │   • //github.com/invokeImmediately/WSU-UE---CSS/animations.less                             │
//   │   • //github.com/invokeImmediately/WSU-UE---CSS/color-palette.less                          │
//   │   • //github.com/invokeImmediately/WSU-UE---CSS/mixins.less                                 │
//   │   • //github.com/invokeImmediately/WSU-UE---CSS/variables.less                              │
//   └─────────────────────────────────────────────────────────────────────────────────────────────┘

.declare-heading-and-header-rulesets(@grid-behavior) when (@grid-behavior = "hybrid") {

/*!    ┌───────────────────────────────────────────────────────────────────────────────────────────┐
**     │ ···· OUE HEADINGS/HEADERS §1: [h1] Elements ············································· │
**     └───────────────────────────────────────────────────────────────────────────────────────────┘
*/

	h1 {
		// Prepend: body:not(.use-bem-styles)
		.column & {
			&:extend(.has-dflt-font);
			padding-bottom: 0;
			margin-top: 1.5rem;
			margin-bottom: .75rem;
			font-size: @v-h1-sz;
			.has-responsive-font(@v-h1-sz, @v-hX-lnhght, @v-fnt-sclng-fctrs-alt);
			font-weight: 900;
			text-transform: uppercase;
			color: @hex-darker-gray;
			&.centered {
				text-align: center;
			}
		}
		.column &:first-child,
		.column header:first-child + & {
			margin-top: 0;
		}
	}

/*!    ┌───────────────────────────────────────────────────────────────────────────────────────────┐
**     │ ···· OUE HEADINGS/HEADERS §2: [h2] Elements ············································· │
**     └───────────────────────────────────────────────────────────────────────────────────────────┘
*/

	h2 {
		.column & {
			&:extend(.has-dflt-font);
			padding: 0 0 0 .1em;
			margin-top: 1.5rem;
			margin-bottom: .75rem;
			margin-left: -.1em;
			font-size: @v-h2-sz;
			.has-responsive-font(@v-h2-sz, @v-hX-lnhght, @v-fnt-sclng-fctrs-alt);
			line-height: 1.375em;
			font-weight: 800;
			color: @hex-darker-gray;
			text-transform: uppercase;
			&.article-title {
				.has-responsive-font((@v-h2-sz * 0.4), @v-hX-lnhght);
			}
			&.centered {
				text-align: center;
			}
			&.narrower-top-margin {
				margin-top: 1.25rem;
			}
			&.no-top-margin {
				margin-top: 0;
			}
		}
		.column &.fancy,
		.column &.solid,
		.column.show-header.has-fancy-header > header:first-child > & {
			position: relative;
			padding: (@v-dflt-spcng / 6) (@v-dflt-spcng / 4) (@v-dflt-spcng * 11 / 40);
			margin-left: (-1 * @v-dflt-spcng / 4);
			margin-bottom: (@v-dflt-spcng / 2);
			margin-right: (-1 * @v-dflt-spcng / 4);
			& { background-color: @rgba; .getRgbaStr(@hex-dark-gray, 0.2); }
			& { .rgb-dark-gray(); background: linear-gradient(to right,
				transparent,
				rgba(@rval, @gval, @bval, 0.075) 5%,
				rgba(@rval, @gval, @bval, 0.075) 50%,
				rgba(@rval, @gval, @bval, 0.225)
			); }
			& { border-bottom: 2px solid @rgba; .getRgbaStr(@hex-dark-gray, 0.075); }
		}
		.column &.fancy.with-top-border,
		.column &.solid,
		.column.show-header.has-fancy-header > header:first-child > & {
			padding-top: 0.5rem;
			&:not(:first-child) {
				margin-top: @v-dflt-spcng;
			}
			&::before {
				content: "";
				position: absolute;
					top: 0;
					left: 0;
				width: 100%;
				height: 0;
				.rgb-darker-gray(); border-top: 1px solid rgba(@rval,@gval,@bval,0.6667);
				 border-bottom: 1px solid rgba(@rval,@gval,@bval,0.3333);
				border-top-width: 2px;
			}
		}
		.column &:first-child,
		.column header:first-child + &,
		.column header:first-child + &.fancy.with-top-border:not(:first-child),
		.column header:first-child + &.solid:not(:first-child) {
			margin-top: 0;
		}
		.column h1 + & {
			font-style: italic;
		}
		.column hr:not(.subSection) + h2 {
			margin-top: 0;
		}
	}

	// TODO: move to hyperlink.less
	h2.article-title a {
		border-bottom: none;
	}

/*!    ┌───────────────────────────────────────────────────────────────────────────────────────────┐
**     │ ···· OUE HEADINGS/HEADERS §3: [h3] Elements ············································· │
**     └───────────────────────────────────────────────────────────────────────────────────────────┘
*/

	h3 {
		.column & {
			&:extend(.has-dflt-font);
			padding: 0 0 0 .1em;
			margin-top: 1.5rem;
			margin-bottom: .75rem;
			margin-left: -.1em;
			font-size: @v-h3-sz;
			.has-responsive-font(@v-h3-sz, @v-hX-lnhght, @v-fnt-sclng-fctrs-alt);
			font-weight: 600;
			text-transform: uppercase;
			color: @hex-crimson;
			&.centered {
				text-align: center;
			}
			&.gray {
				color: @hex-darker-gray;
			}
			&.no-top-margin {
				margin-top: 0;
			}
		}
		.column &.lowercase,
		.column.show-header.has-lowercase-header > header:first-child > & {
			text-transform: none;
		}
		.column &.fancy,
		.column &.solid,
		.column.show-header.has-fancy-header > header:first-child > & {
			position: relative;
			padding: (@v-dflt-spcng / 6) (@v-dflt-spcng / 4) (@v-dflt-spcng * 9 / 40) 0;
			margin-left: 0;
			margin-bottom: (@v-dflt-spcng / 2);
			margin-right: 0;
			& { background-color: @rgba; .getRgbaStr(@hex-light-crimson, 0.075); }
			& { .rgb-light-crimson(); background: linear-gradient(to right,
				transparent,
				rgba(@rval, @gval, @bval, 0.075) 5%,
				rgba(@rval, @gval, @bval, 0.075) 50%,
				rgba(@rval, @gval, @bval, 0.225)
			); }
			& { border-bottom: 2px solid @rgba; .getRgbaStr(@hex-light-crimson, 0.075); }
		}
		.column &.fancy.with-top-border,
		.column &.solid,
		.column.show-header.has-fancy-header > header:first-child > & {
			padding-top: 0.4375rem;
			&:not(:first-child) {
				margin-top: @v-dflt-spcng;
			}
			&::before {
				content: "";
				position: absolute;
					top: 0;
					left: 0;
				width: 100%;
				height: 0;
				.rgb-crimson(); border-top: 1px solid rgba(@rval,@gval,@bval,0.67);
				 border-bottom: 1px solid rgba(@rval,@gval,@bval,0.375);
			}
		}		
		.column &:first-child,
		.column header:first-child + &,
		.column header:first-child + &.fancy.with-top-border:not(:first-child),
		.column header:first-child + &.solid:not(:first-child),
		.column hr:not(.subSection) + &
		{
			margin-top: 0;
		}
	}

/*!    ┌───────────────────────────────────────────────────────────────────────────────────────────┐
**     │ ···· OUE HEADINGS/HEADERS §4: [h4] Elements ············································· │
**     └───────────────────────────────────────────────────────────────────────────────────────────┘
*/

	h4 {
		.column & {
			&:extend(.has-dflt-font);
			padding: 0;
			margin-top: 1rem;
			margin-bottom: .5rem;
			font-size: @v-h4-sz;
			.has-responsive-font(@v-h4-sz, @v-h4-lnhght, @v-fnt-sclng-fctrs-alt);
			font-weight: 600;
			color: @hex-crimson;
			&.centered {
				text-align: center;
			}
			&.fancy {
				&:extend(.column h3.fancy all);
			}
			&.gray {
				color: @hex-darker-gray;
			}
		}
		.column &:first-child,
		.column header:first-child + &,
		.column hr:not(.subSection) + &
		{
			margin-top: 0;
		}
	}

/*!    ┌───────────────────────────────────────────────────────────────────────────────────────────┐
**     │ ···· OUE HEADINGS/HEADERS §5: [hN] Elements ············································· │
**     └───────────────────────────────────────────────────────────────────────────────────────────┘
*/

	.column {
		h1.crimson, h2.crimson {
			color: @hex-crimson;
		}
	}

	section {
		&.side-right, &.row.side-right {
			.column.one h2.fancy,
			.column.one h3.fancy {
				@media all and (min-width: (@column-floating-threshold + 1)) {
					margin-right: 0;
				}
			}
		}
	}

	header.article-header {
		body.blog .column & + * {
			padding-top: 15px;
			border-top: 1px solid rgba(127,127,127,0.2);
		}
		.column & h1.article-title,
		.column & h2.article-title {
			.has-responsive-font((@v-p-sz * 1.5), @v-hX-lnhght);
		}
	}

/*!    ┌───────────────────────────────────────────────────────────────────────────────────────────┐
**     │ ···· OUE HEADINGS/HEADERS §7: [header] Elements & Children ······························ │
**     └───────────────────────────────────────────────────────────────────────────────────────────┘
*/

	header.main-header {
		.sup-header-default {
			margin-bottom: .5rem;
			.has-responsive-font(0.9rem, false, @v-fnt-sclng-fctrs-alt-2);
		}
		.sub-header-default,
		.sub-header {
			.has-responsive-font((2.5rem * 16 / 17), 0.9em, @v-fnt-sclng-fctrs-alt-2);
		}
		&.centered {
			@media all {
				@media (min-width: @large-format-threshold) {
					text-align: center;
				}
				@media (min-width: (@spine-threshold + 1)) and (max-width: (@large-format-threshold - 1)) {
					text-align: left;
				}
				@media (min-width: (@tablet-screen-width + 1)) and (max-width: @spine-threshold) {
					text-align: center;
				}
				@media (max-width: @tablet-screen-width) {
					text-align: left;
				}
			}
		}
		.header-group { text-align: inherit; }
		.header-group.centered {
			@media all {
				@media (min-width: @large-format-threshold) {
					width: 100%;
					left: 50%;
					.transform(~"translateX(-50%)");
				}
				@media (min-width: (@tablet-screen-width + 1)) and (max-width: @spine-threshold) {
					width: 100%;
					left: 50%;
					.transform(~"translateX(-50%)");
				}
			}
		}
	}

	.column {
		&:not(.show-header) > header:first-child {
			display: none;
		}
		header:first-child + h1, header:first-child + h2.fancy.with-top-border,
		 header:first-child + h3.fancy.with-top-border {
			margin-top: 0;
		}
	}
}
.declare-heading-and-header-rulesets(@grid-behavior);

/*!    ┌───────────────────────────────────────────────────────────────────────────────────────────┐
**     │ ···· OUE HEADINGS/HEADERS §7: (Legacy) Sectional Article Headers ························ │
**     │ ···· (INCLUSIONAL VIA MIXIN) ···························································· │
**     └───────────────────────────────────────────────────────────────────────────────────────────┘
*/
.use-sectional-article-headers() {
	.page.has-short-main-header {
		.main-header {
			height: 85px;
			& > .header-group {
				padding-bottom: 1em !important;
			}
		}
	}
	.use-short-main-header-on-pages(@header-height: 85px, @header-padding: 1em) {
		body.page:not(.home) main.spine-blank-template > header.main-header {
			@header-height: 85px;
			& > div.header-group {
				padding-bottom: @header-padding !important;
			}
		}
	}
	.row.halves.article-header,
	.row.single.article-header {
		position: relative;
		&.gutter .column:not(.gutterless) {
			padding-left: 0;
			padding-right: 0;
		}
		&.pad-top .column {
			padding-top: 0;
		}
	}
	.row.halves.article-header {
		height: 230px;
		@media all {
			@media (max-width: @large-mobile-screen-width) {
				height: 340px;
			}
		}
		@media print {
			height: auto;
		}
		.column {
			&.one {
				position: absolute;
				right: 40%;
				left: 0;
				width: auto;
				height: 100%;			
				padding-left: 0;
				padding-right: 0;			
				background: @hex-dark-gray;
				background: linear-gradient(
						to right,
						rgba(0,0,0,0.5),
						rgba(0,0,0,0.4) 50%,
						rgba(0,0,0,0.1)
					),
					linear-gradient(
						to right,
						#5e6a71,
						#5e6a71
					);
				@media all {
					@media (max-width: @large-mobile-screen-width) {
						right: 0;
						height: 50%;
						top: 50%;
						background: linear-gradient(to top, rgba(0,0,0,0.7), rgba(0,0,0,0.4) 70%, 
							rgba(0,0,0,0.1)), linear-gradient(to right, #5e6a71,#5e6a71);
					}
				}
				@media print {
					position: static;
					height: auto;
					padding: @v-dflt-spcng;
				}
				& > :first-child,
				header:first-child + * {
					position: absolute;
					top: 50%;
					right: @v-dflt-spcng;
					left: @v-dflt-spcng;
					.transform(~"translateY(-50%)");
					@media all {
						@media (max-width: @column-floating-threshold) {
							right: (@v-dflt-spcng / 2);
						}
						@media (max-width: @large-mobile-screen-width) {
							left: (@v-dflt-spcng / 2);
						}
						@media (max-width: @mobile-screen-width) {
							left: (@v-dflt-spcng / 4);
						}
						@media print {
							position: static;
							.transform(~"none");
						}
					}
					& > :last-child {
						margin-bottom: 0 !important;
					}
				}
				h1 {
					margin: 0;
					color: @hex-white;
					line-height: .95em;
					text-shadow: 0 0 4px @hex-black, 0 0 4px @hex-black, 0 0 4px @hex-black,
						0 0 4px @hex-black, 0 0 4px @hex-black;
					@media all and (max-width: @column-floating-threshold) {
						font-size: 6.5vw;
					}
					& + .subtitle {
						color: @hex-white;
						font-size: 1.25em;
						line-height: 1.1em;
						font-weight: bold;
						text-transform: uppercase;
						text-shadow: 0 0 2px @hex-black, 0 0 2px @hex-black, 0 0 2px @hex-black;
						@media all and (max-width: @column-floating-threshold) {
							font-size: 4vw;
						}
					}
				}
				.parent-page {
					margin-bottom: 0.125em;
					color: @hex-bright-gray;
					@media all and (max-width: @column-floating-threshold) {
						font-size: 3.25vw;
					}
				}
				& > :not(:first-child):not(header:first-child + *) {
					display: none;
				}
				& > :not(h1):not(div) {
					display: none;
				}
			}
			&.two {
				position: absolute;
				right: 0;
				left: 60%;
				width: auto;
				height: 100%;
				margin-top: 0 !important;
				background-color: @hex-gray;
				background-position: center center;
				background-size: cover;
				@media all {
					@media (max-width: @large-mobile-screen-width) {
						left: 0;
						height: 50%;
						top: 0;
					}
				}
				@media print {
					display: none;
				}
			}
			&.one, &.two {
				@media all and (max-width: @column-floating-threshold) {
					float: left;
					clear: none;
				}
			}
		}
	}
	.row.single.article-header {
		height: 340px;
		.column {
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background-color: @hex-gray;
			background-position: center center;
			background-size: cover;
			&.show-header > header {
				box-sizing: border-box;
				position: absolute;
				left: 0;
				bottom: 0;
				width: 100%;
				padding: 2rem 2rem 0;
				@media all {
					@media (max-width:@large-mobile-screen-width) {
						padding-left: .5rem;
						padding-right: .5rem;
					}
				} 
				& > * {
					@v-fnt-sclng-hdr: 1.0, 1.0, 1.0, 1.0, 0.714286, 0.510204489796;
					color: @hex-white;
					padding: 0.25em;
					margin: 0;
					.has-responsive-font(3.3rem, 0.9em, @v-fnt-sclng-hdr);
					& { text-shadow: 1px 1px 8px @rgba; .getRgbaStr(@hex-black, 0.75); }
					& { background-color: @rgba; .getRgbaStr(@hex-black, 0.75); }
					.subtitle {
						display: block;							
						font-size: 0.5em;
						padding: 0.25em;
						margin-top: 0.25em;
						line-height: 1.1em;
						text-transform: none;
						& { background-color: @rgba; .getRgbaStr(@hex-black, 0.75); }
					}
				}
			}
		}
	}
}

/*!    ┌───────────────────────────────────────────────────────────────────────────────────────────┐
**     │ ···· OUE HEADINGS/HEADERS §8: Accessibility friendly classes ···························· │
**     └───────────────────────────────────────────────────────────────────────────────────────────┘
*/

/*!      >>> ···· §8.1, Accessibility friendly classes: Spacing ····························· <<< */

// §8.1a: LESS variables
@hN--spacing-0: 0em;
@hN--spacing-1: .25em;
@hN--spacing-2: .5em;
@hN--spacing-3: .75em;
@hN--spacing-4: 1em;
@hN--spacing-5: 1.25em;
@hN--spacing-6: 1.5em;
@hN--spacing-7: 1.75em;
@hN--spacing-8: 2em;
@hN--spacing-array: @hN--spacing-0, @hN--spacing-1, @hN--spacing-2, @hN--spacing-3, @hN--spacing-4, 
	@hN--spacing-5, @hN--spacing-6, @hN--spacing-7, @hN--spacing-8;

// §8.1b: Utility classes
h1,
h2,
h3,
h4,
h5,
h6 {
	.column * + & {
		.hN--spacing-loop(@idx, @spacing) when (@idx >= 0) and (@idx <= length(@spacing)) {
			.hN--spacing-loop((@idx-1), @spacing);
			&.hN--spacing-@{idx} {
				margin: 0;
				margin-top: extract(@spacing, @idx);
			}
		}
		.hN--spacing-loop(length(@hN--spacing-array), @hN--spacing-array);
	}
}

// §8.1c: Default styles
h1,
h2,
h3,
h4,
h5,
h6 {
	.column & {
		.hN--spacing-4;
	}
}

/*!      >>> ···· §8.2, Accessibility friendly classes: Typography - font sizing ············ <<< */

// §8.2a: LESS variables
@hN--fSize-1: 1.4em;
@hN--fSize-2: 1.6em;
@hN--fSize-3: 1.8em;
@hN--fSize-4: 2.0em;
@hN--fSize-5: 2.2em;
@hN--fSize-6: 2.4em;
@hN--fSize-array: @hN--fSize-1, @hN--fSize-2, @hN--fSize-3, @hN--fSize-4, @hN--fSize-5,
	@hN--fSize-6;

// §8.2b: Utility classes
h1,
h2,
h3,
h4,
h5,
h6 {
	// hN typography: Font-sizing
	.column & {
		.hN--size-loop(@idx, @sizes, @font-scale) when (@idx > 0)
				and (@idx <= length(@sizes)) {
			.hN--size-loop((@idx - 1), @sizes, @font-scale);
			&.hN--fSize-@{idx} {
				.responsive-fSize(extract(@sizes, @idx), @font-scale);
			}
		}
		.hN--size-loop(length(@hN--fSize-array), @hN--fSize-array, @hN--responsive-fScale);
	}
}

// §8.2c: Default styles
h1 {
	.column & {
		.hN--fSize-1;
	}
}
h2 {
	.column & {
		.hN--fSize-2;
	}
}
h3 {
	.column & {
		.hN--fSize-3;
	}
}
h4 {
	.column & {
		.hN--fSize-4;
	}
}
h5 {
	.column & {
		.hN--fSize-5;
	}
}
h6 {
	.column & {
		.hN--fSize-6;
	}
}

/*!      >>> ···· §8.3, Accessibility friendly classes: Typography - line heights ··········· <<< */

// §8.3a: LESS variables
@hN--lHeight-1: 1em
@hN--lHeight-2: 1.1em
@hN--lHeight-3: 1.2em
@hN--lHeight-4: 1.3em
@hN--lHeight-5: 1.375em
@hN--lHeight-6: 1.4em
@hN--lHeight-7: 1.5em
@hN--lHeight-array: @hN--lHeight-1, @hN--lHeight-2, @hN--lHeight-3, @hN--lHeight-4, @hN--lHeight-5,
	@hN--lHeight-6, @hN--lHeight-7;

@hN--downscale: 0.938;
@hN--responsive-fScale: 1.0, 1.0, 1.0, 1.0, @hN--downscale, pow(@hN--downscale, 2);

// §8.3b: Utility classes
h1,
h2,
h3,
h4,
h5,
h6 {
	.column & {
		.hN--lHeight-loop(@idx, @heights) when (@idx > 0) 
				and (@idx <= length(@sizes)) {
			.hN--lHeight-loop((@idx - 1), @heights);
			&.hN--lHeight-@{idx} {
				line-height: extract(@heights, @idx);
			}
		}
		.hN--lHeight-loop(length(@hN--lHeight-array), @hN--lHeight-array);

		&.hN--linked {
			line-height: @hN--lHeight-5;
		}
	}
}

// §8.3c: Default styles
h1,
h2,
h3,
h4,
h5,
h6 {
	.column & {
		.hN--lHeight-2;
	}
}

/*!      >>> ···· §8.4, Accessibility friendly classes: Coloring ···························· <<< */

h1,
h2,
h3,
h4,
h5,
h6 {
	.column & {
		&.hN--white {
			color: @hex-white;
			&.hN--solid {
				position: relative;
				padding: (@v-dflt-spcng / 6) (@v-dflt-spcng / 4) (@v-dflt-spcng * 11 / 40);
				& { background-color: @rgba; .getRgbaStr(@hex-black, 0.9); }
				& { .rgb-black(); background: linear-gradient(to right,
					rgba(@rval, @gval, @bval, 0.67),
					rgba(@rval, @gval, @bval, 0.75) 5%,
					rgba(@rval, @gval, @bval, 0.75) 50%,
					rgba(@rval, @gval, @bval, 1)
				); }
				& { border-bottom: 2px solid @rgba; .getRgbaStr(@hex-black, 0.333); }
				&::before {
					content: "";
					position: absolute;
					top: 0;
					left: 0;
					width: 100%;
					height: 0;
					.rgb-black();
					border-top: 1px solid rgba(@rval,@gval,@bval,1);
					border-bottom: 1px solid rgba(@rval,@gval,@bval,0.5);
				}
			}
		}
	}
}

/*!      >>> ···· §8.5, Accessibility friendly classes: Child elements ······················ <<< */

// hN children: Hyperlinks
h1,
h2,
h3,
h4,
h5,
h6 {
	.column & > a {
		border-bottom: none;
		box-shadow: none;
		text-decoration: underline;
		&:hover {
			text-decoration: none;			
		}
	}
}

/*!    ┌───────────────────────────────────────────────────────────────────────────────────────────┐
**     │ ···· OUE HEADINGS/HEADERS §9: Article Header Blocks, Elements, & Modifiers ·············· │
**     │ ···· (INCLUSIONAL VIA MIXIN) ···························································· │
**     └───────────────────────────────────────────────────────────────────────────────────────────┘
*/
// TODO: Finish writing.
// .page.use-bem-styles { ... }
// .article-header--2-columns
// .article-header--2-columns .article-header__column-1
// .article-header--2-columns .article-header__column-2
// .article-header__bread-crumb
// .article-header__background
// .article-header__title-text
// .article-header__title-text
// .article-header--1/2/3/4x-sized
// .article-header__subtitle-text

/*!Example from SASS:
** .person { }
**  .person__face {
**    .person--handsome & { }
**  }
**.person--handsome { }
*/
