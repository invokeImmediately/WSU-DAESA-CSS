/*  ┌────────────────────────────────────────────────────────────────────────────────────────────┐
**  │ FILENAME: events-calendar.less                                                             │
**  │                                                                                            │
**  │ AUTHOR: Daniel Rieck <daniel.rieck@wsu.edu> (https://github.com/invokeImmediately)         │
**  │                                                                                            │
**  │ DESCRIPTION: Contains styles for elements associated with the events calendar plugin on    │
**  │   WSU Office of Undergraduate Education web pages built using the builder template of the  │
**  │   Spine parent theme of WSUWP. Styles are designed to accompany or supersede styling       │
**  │   associated with the theme.                                                               │
**  └────────────────────────────────────────────────────────────────────────────────────────────┘
*/

/*  ================================================================================================
**  SEMANTIC CSS FOR STYLING ELEMENTS ASSOCAITED WITH THE EVENTS CALENDAR PLUGIN ON OUE WEBSITES
*/

.use-events-calendar(@sub-header-text) when (isstring(@sub-header-text)) {
	.single-tribe_venue {
		.tribe-events-venue-meta {
			.tribe-venue-name::before {
				content: "Events by Venue: ";
			}

			.venue-address {
				display: none;
			}
		}
	}

	.tribe-events-before-html {
		margin-bottom: 2rem;

		.single-tribe_events & .calendar-intro-message {
			display: none;
		}
	}

	.tribe-events-calendar {
		td.tribe-events-past,
		td.tribe-events-present,
		td.tribe-events-future {
			div[id*=tribe-events-daynum-] > a {
				border-bottom: none;
				border-bottom-color: @colors__links;
				box-shadow: none;

				&:hover {					
					border-bottom-left-radius: 0.25em;
					border-bottom-right-radius: 0.25em;
					& { border-bottom: 0.0625em solid @rgba; .getRgbaStr(@colors__links, 1); }
					& { box-shadow: inset 0 -0.3125em 0 @rgba; .getRgbaStr(@colors__links, .15); }
					color: @hex-light-crimson;
				}
			}
		}
	}

	.tribe-events-sub-nav {
		max-width: none;
	}

	.tribe-related-events-thumbnail {
		max-width: 198px;

		a {
			border: none;
			box-shadow: none;
			text-shadow: none;

			&:hover {
				box-shadow: none;
				text-shadow: none;
				background-color: transparent;
			}
		}

		.tribe-events-single ul.tribe-related-events & img {
			border: 0.0625em solid transparent;

			&:hover {
				border: .0625em solid @colors__links;
			}
		}
	}

	.wsuwp-content-syndicate-event {
		.content-item-event-date {
			font-weight: bold;

			&::after {
				content: ":";
			}
		}

		.content-item-event-venue {
			&::before {
				content: "in "
			}

			&::empty {
				display: none;
			}
		}
	}

	.wsuwp-content-syndicate-list {
		&:empty {
			&::after {
				content: "None.";
			}
		}
	}

	.recurring-info-tooltip,
	.tribe-events-calendar .tribe-events-tooltip,
	.tribe-events-shortcode.view-week .tribe-events-tooltip,
	.tribe-events-week .tribe-events-tooltip {
		padding: .75em 1em;

		.workshop-note {
			display: none;
		}
	}

	.tribe_events-template-default,
	.tribe_venue-template-default,
	.tribe-theme-spine.events-archive {
		.article-header:not(.row) {
			display: none;
		}
	}


	.type-tribe_events[class*=post-] {
		.tribe-events-cal-links {
			clear: left;
		}

		.tribe-events-event-image {
			float: left;
			height: 0;
			padding-bottom: 30%;
			position: relative;

			a {
				display: block;
				position: absolute;
				top: 0;
				right: 0;
				bottom: 0;
				left: 0;
				border-bottom: none;
				box-shadow: none;
				z-index: 1;
			}

			img {
				width: 100%;
				height: auto;
			}

			.tribe-events-single & {
				width: 30%;
				margin-right: 3%;

				@media all {
					@media (min-width: 601px) {
						width: 20%;
						padding-bottom: 20%;
					}
				}
			}
		}
	}

	body.tribe-theme-spine:not(.tribe_venue-template-default) {
		.main-header {
			.header-group {
				width: ~"calc(90%)";
				width: ~"calc(100% - @{v-dflt-spcng})";

				.sub-header {
					color: transparent !important;

					&::before {
						content: "@{sub-header-text}";
						position: absolute;
						color: @hex-white;
					}

					a {
						display: none;
					}
				}
			}
		}
	}

	#tribe-bar-views {
		a {
			border-bottom: none;
			border-bottom-left-radius: 0;
			border-bottom-right-radius: 0;
			box-shadow: none;
			text-shadow: none;
		}

		li.tribe-bar-active a {
			border-bottom: 0.0625em solid transparent;

			&:hover {
				border-bottom-right-radius: 0.25em;
				border-bottom-left-radius: 0.25em;
				& { border-bottom: 0.0625em solid @rgba; .getRgbaStr(@colors__links, 1); }
				& { box-shadow: inset 0 -0.3125em 0 @rgba; .getRgbaStr(@colors__links, .15); }
				color: @hex-light-crimson !important;
			}
		}
	}

	#tribe-events {
		.workshop-note {
			font-size: 0.9em;
			color: @hex-darker-yellow;
		}

		.column & ul li {
			list-style-image: none;
		}
	}

	#tribe-events-content {
		@title-color: #58111d;

		&.tribe-events-day {
			.tribe-events-day-time-slot > h5:first-child {
				background-color: @hex-darker-gray;
			}
		}

		&.tribe-events-list {
			.tribe-events-page-title {
				padding-bottom: 0.5em;
				padding-top: 0.42em;
				border-radius: 10px;
				background-color: @title-color;
				color: @hex-white;

				a {
					color: @hex-light-crimson;
					border-bottom: 1px solid transparent;

					&:hover {
						color: tint(@hex-light-crimson, 50%);
						border-bottom-color: tint(@hex-light-crimson, 50%);
					}
				}
			}

			.tribe-event-schedule-details {
				font-size: 1.3rem;
			}

			.tribe-events-venue-details {
				font-size: 1.3rem;
				margin-top: 0;
				/*! TODO: Replace with a JavaScript-based solution b/c some events lack a venue, but the plugin loads empty HTML tags regardless.
				&:before {
					content: "Location: ";
					font-weight: bold;
				}*/
			}

			.tribe-events-list-separator-month span {
				padding-bottom: 0.2em;
				border-radius: 4px;
				background-color: @hex-crimson;
				color: white;
			}
		}

		&.tribe-events-month {
			border-radius: 10px;
			background-color: @title-color;

			.tribe-events-page-title {
				color: @hex-white;
				margin-top: @v-dflt-spcng * 3 / 4;

				a {
					color: @hex-light-crimson;
					border-bottom: 1px solid transparent;

					&:hover {
						color: tint(@hex-light-crimson, 50%);
						border-bottom-color: tint(@hex-light-crimson, 50%);
					}
				}
			}

			.tribe-events-calendar {
				background-color: @hex-white;

				th {
					background-color: @hex-crimson;
				}
			}

			#tribe-events-header,
			#tribe-events-footer {
				&::before,
				&::after {
					@media only screen and (max-width: 768px) {
						display: none;
					}
				}

				ul {
					max-width: none;
				}

				a {
					border-bottom: 1px solid @hex-white;
					& { box-shadow: inset 0 -2px 0 @rgba; .getRgbaStr(@hex-white,.6667); }
					color: @hex-white;
					padding-left: 3px;
					padding-right: 3px;

					&:hover {
						.getRgbaStr(@hex-white, 0.85);
						background-color: @rgba;
						border-radius: 4px;
						border-bottom: 1px solid transparent;
						box-shadow: inset 0 -2px 0 transparent;
						color: @hex-light-crimson;
					}

					@media only screen and (max-width: 768px) {
						border-bottom: 1px solid transparent;
						box-shadow: inset 0 -0.3125em 0 transparent;
					}
				}

				.tribe-events-sub-nav .tribe-events-nav-previous {
					margin-left: 5px;

					@media only screen and (max-width: 768px) {
						margin-left: 0;
					}
				}
			}

			.tribe-events-sub-nav li a {
				@media only screen and (max-width: 768px) {
					background-color: transparent;
				}				
			}

			#tribe-mobile-container {
				padding: @v-dflt-spcng / 4;

				.tribe-mobile-day {
					.tribe-mobile-day-heading {
						border-top-left-radius: 7px;
						border-top-right-radius: 7px;
						margin-bottom: 0;
						margin-left: 0;
						padding-left: @v-dflt-spcng / 4;
						padding-right: @v-dflt-spcng / 4;
						padding-top: @v-dflt-spcng / 4;
					}

					.tribe-events-mobile {
						border-bottom-left-radius: 7px;
						border-bottom-right-radius: 7px;
						padding-left: @v-dflt-spcng / 4;
						padding-right: @v-dflt-spcng / 4;
					}

					.tribe-mobile-day-heading,
					.tribe-events-mobile {
						background-color: @hex-white;
						font-size: 0.925rem;
					}
				}
			}
		}

		&.tribe-events-single {
			.tribe-events-event-meta {
				padding-top: @v-dflt-spcng * 3 / 4;
			}

			.tribe-events-schedule {
				margin-top: 0.375em;

				h2 {
					font-size:1.3rem;
				}
			}
		}
	}
}

.use-upcoming-events-on-home(@id-name: upcoming-events) {

	body.home #@{id-name} {

		.content-item-event-date {
			box-sizing: border-box;
			color: #fff;
			float: left;
			font-size: 32px;
			font-weight: 600;
			line-height: 50px;
			position: relative;
			text-align: center;
			text-transform: uppercase;
			width: 2.5rem;
			word-spacing: 2rem;
			z-index: 1;

			&::before,
			&::after {
				content: "";
				left: 0;
				position: absolute;
				-webkit-transition: background .4s;
				transition: background .4s;
				width: 100%;
				z-index: -1;
			}

			&::before {
				background: #717171;
				bottom: 0;
				top: 0;
			}

			&::after {
				background: #b5babe;
				bottom: 0;
				height: 48px;
			}

			&:first-line {
				font-size: 12px;
				font-weight: 300;
				line-height: 24px;
			}
		}

		.content-item-event-meta {
			display: none;
		}

		.content-item-event-title {
			display: block;
			margin-left: 3.25rem;

			a {
				border-bottom-color: transparent;
				text-shadow: none;

				&:hover {
					border-bottom-color: @colors__links;
					background-color: #efefef;
				}
			}
		}

		.wsuwp-content-syndicate-item,
		.wsuwp-content-syndicate-event {
			a {
				border-bottom-color: none;
				box-shadow: none;
				color: #393939;
				text-decoration: none;

				.read-more {
					font-size: .75em;
					font-weight: 700;
					color: @hex-crimson;
				}
			}
		}

		.wsuwp-content-syndicate-item {
			margin-bottom: 1em;

			a:hover {
				border-bottom-color: @colors__links;
				color: @colors__links;
			}
		}

		.wsuwp-content-syndicate-event {
			box-sizing: border-box;
			-webkit-box-flex: 1;
			-ms-flex: 1 0 33%;
			flex: 1 0 33%;
			list-style: none;
			margin: .5em 0;
			padding: .5em 1em 0 0;
			.transition(~"background .4s");
			width: 33%;

			@media all and (max-width: @tablet-screen-width) {
					-webkit-box-flex: 1;
					-ms-flex: 1 0 50%;
					flex: 1 0 50%;
			}
		}

		.wsuwp-content-syndicate-list {
			display: -webkit-box;
			display: -ms-flexbox;
			display: flex;
			flex-flow: row wrap;
			font-size: 0.925rem;
			list-style-type: none;
			padding: 0;
			position: relative;
		}

		.wsuwp-content-syndicate-wrapper {
			overflow: hidden;
		}

		li:hover .content-item-event-date {
			&::before {
				background: #b5babe;
			}

			&::after {
				background: #981e32;
			}
		}
	}
}
